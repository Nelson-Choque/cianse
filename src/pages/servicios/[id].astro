---
import Header from "../../components/header.astro";

import MySiteLayout from "../../layouts/MySiteLayout.astro";

import {servicios} from "./../../data/data.json";


export function getStaticPaths() {
    return [
        { params: { id: "1" } },
        { params: { id: "2" } },
        { params: { id: "3" } },
        { params: { id: "4" } },
        { params: { id: "5" } },
        { params: { id: "6" } },
        { params: { id: "7" } },
        { params: { id: "8" } },
        { params: { id: "9" } },
        { params: { id: "10" } },
        { params: { id: "11" } },
    ];
}

let { id } = Astro.params;

let idParams = parseInt(id);

let service = servicios.find((service) => service.id === idParams);


---

<style is:global>
    body {
        background-color: #f5f5f5;
    }
    .header-banner {
        background: var(--bg-primary);
    }
    .portada {
        display: none;
    }

    .producto {
        display: grid;
        grid-template-columns: 1fr;
        width: 100%;
        min-height:100vh ;
        margin: 0 auto 2rem auto;
        padding: 1rem;
        overflow: hidden;
        box-sizing: border-box;
        gap: 1rem;

        grid-template-areas:
                "img"
                "descripcion"
                "caracteristicas";
        }
    }

    .producto_images {
        grid-area: img;
     
    }

    
    .producto_images_principal_img{
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

    .producto_images_secundarias{
        display: flex;
        justify-content: center;
        gap: .5rem;
        flex-wrap: wrap;
        
        margin-top: 1rem;
    }

    .producto_images_secundarias_img{
            width: 80px;
            height: 80px;
            cursor: pointer;
        }


    .producto_descripcion {
        grid-area: descripcion;
    }
    .producto_descripcion_title {
        font-size: 1.5rem;
        text-transform: uppercase;
        color: var(--color-primary)

    }
    .producto_descripcion_text{
    }

    .producto_descripcion_button{
        padding: 1rem 1.5rem;
        background-color: var(--bg-primary);
        color: #fff;
        border: none;
        border-radius: 1rem;
        font-size: 1rem;
        font-weight: bold;
        text-transform: uppercase;
    }

    .producto_caracteristicas {
        /* border: 1px solid #000000aa; */
        grid-area: caracteristicas;
        margin-top: 1rem;
    }

    .producto_caracteristicas_title {
        /* background-color: #2c148b; */
        margin: 0;
        /* padding: 1rem; */
        color: #000;
        text-transform: capitalize;

    }
    .producto_caracteristicas_items{
        padding: 0;
        list-style: none;
    }
    .producto_caracteristicas_items_item {
        margin-top: .5rem;
        display: flex;
        gap: .5rem;
    }

    .producto_caracteristicas_items_item_icon{
        color: green;
        font-size: 1.5rem;
        position: relative;
        top: 4px;
    }
    .producto_caracteristicas_items_item_text{
        margin: 0;
    }

    @media (min-width: 768px) {
        .producto {
            grid-template-columns: 1fr 1fr;
            grid-template-rows: max-content max-content;
            grid-template-areas:
                "img descripcion"
                "caracteristicas caracteristicas";
        }
        .producto_descripcion_title{
            font-size: 2rem;
        }
        .producto_caracteristicas_title{
            font-size: 1.5rem;
        
        }

            


    .producto_images_principal_img{
            width: 100%;
            height: 500px;
        }

        .producto_images_secundarias_img{
            width: 100px;
            height: 100px;

        }

    
        .producto_descripcion {
        padding-left: 1rem;
    }

    }
    @media (min-width: 1200px) {
        .producto {
            max-width: 1400px;
        }

    }


</style>

<MySiteLayout>
    <Header />

    <section class="producto">

        <div class="producto_images">

            
            <div class="producto_images_principal">
                <img class="producto_images_principal_img" src={'/img/'+service.imagenes[0]} alt={"imagen de " + service.nombre}>
            </div>

            <div class="producto_images_secundarias">

        
                {(service.imagenes)?
                    service.imagenes.map((e) => (
                        <>
                            <img class="producto_images_secundarias_img" data-image="true" src={"/img/" + e} />
                        </>
                    )):"Error en la imagen"
                }
            </div>        

        </div>

        <div class="producto_descripcion">
            <h2 class="producto_descripcion_title">{service.nombre}</h2>
            <p class="producto_descripcion_text font-text">{service.descripcion}</p>

            <div class="producto_caracteristicas">
                <!-- <h3 class="producto_caracteristicas_title ">
                    descripcion del producto
                </h3> -->
                <!-- <hr> -->
                <ul class="producto_caracteristicas_items font-text">
                    {
                        (service.caracteristicas)?
                            service.caracteristicas.map((e) => (
                                <li class="producto_caracteristicas_items_item">
                                    <i class="fa-regular fa-circle-check producto_caracteristicas_items_item_icon"></i> <p class="producto_caracteristicas_items_item_text">{e}</p>
                                    </li>
                                    )):"error"
    
                    }
                </ul>
            </div>
            <button class="producto_descripcion_button">¡CONTÁCTANOS!</button>


        </div>

        
    </section>
</MySiteLayout>


<script type="module">


        const $imgSecundarias = document.querySelector(".producto_images_secundarias");
        const $imgPrincipal = document.querySelector(".producto_images_principal_img");


        $imgSecundarias.addEventListener("click",(e)=>{


            if( !(e.target.getAttribute("data-image"))){

                return "";

            }

            const $image = e.target;

            const urlImage = $image.getAttribute("src");

            $imgPrincipal.setAttribute("src", urlImage)


        })

  </script>